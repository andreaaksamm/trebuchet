{"version":3,"names":[],"mappings":"","sources":["post.js"],"sourcesContent":["let $postHeader = $(\".c-post-header\");\n\n$(document).ready(function() {\n\tconf();\n\n\tstickyHeader();\n\n\ttables();\n\tclipboard();\n\tgallery();\n\tzoom();\n\tvideos();\n\tauthors();\n\tdisqus();\n});\n\nfunction conf() {\n\ttoastr.options.timeOut = 1500;\n\ttoastr.options.extendedTimeOut = 60;\n\ttoastr.options.positionClass = \"toast-top-full-width\";\n\n\ttoastr.options.showMethod = 'slideDown';\n\ttoastr.options.hideMethod = 'slideUp';\n\ttoastr.options.closeMethod = 'slideUp';\n\n\ttoastr.options.showDuration = \"100\";\n\ttoastr.options.hideDuration = \"100\";\n}\n\nfunction tables() {\n\t$(\"table\").wrap(\"<div class='responsive-table'></div>\");\n}\n\nfunction stickyHeader() {\n\tlet toc = document.querySelector('.c-sticky-header__toc');\n\n\tif(toc) {\n\n\t\tlet stickyHeader = document.querySelector('.c-sticky-header');\n\t\tlet stickyTitle = document.querySelector('.c-sticky-header__title');\n\n\t\ttocbot.init({\n\t\t\ttocSelector: '.c-sticky-header__toc',\n\t\t\tcontentSelector: '.c-post-content',\n\t\t\thasInnerContainers: true\n\t\t});\n\n\t\tif(!toc.childElementCount) {\n\t\t\tstickyTitle.style.display = 'block';\n\t\t}\n\n\t\treadingProgress('.c-post-content', '.c-sticky-header__progress-bar');\n\n\t\tstickyHeader.addEventListener('click', function() {\n\t\t\tzenscroll.toY(0);\n\t\t});\n\n\t\twindow.addEventListener('scroll', function() {\n\t\t\tcheckTop();\n\t\t});\n\t}\n}\n\nfunction checkTop() {\n\tlet scroll = $(window).scrollTop();\n\n\tlet bottomHeader = ($postHeader.height() + $postHeader.offset().top);\n\tlet belowHeader = scroll > bottomHeader;\n\n\tlet bottomPost = $(\".c-post-content\").height() + bottomHeader;\n\tlet belowPost = scroll > bottomPost;\n\n\tif(belowHeader) {\n\t\tif(!belowPost) {\n\t\t\tdocument.body.classList.add(\"sticky-opened\");\n\t\t} else {\n\t\t\tdocument.body.classList.remove(\"sticky-opened\");\n\t\t}\n\t} else {\n\t\tdocument.body.classList.remove(\"sticky-opened\");\n\t}\n}\n\nfunction clipboard() {\n\tlet clipboard = new ClipboardJS('#js-clipboard');\n\n\tclipboard.on('success', function(e) {\n\t\ttoastr.success('Copied!');\n\t});\n}\n\nfunction gallery() {\n\tvar images = document.querySelectorAll('.kg-gallery-image img');\n\timages.forEach(function (image) {\n\t\tvar container = image.closest('.kg-gallery-image');\n\t\tvar width = image.attributes.width.value;\n\t\tvar height = image.attributes.height.value;\n\t\tvar ratio = width / height;\n\t\tcontainer.style.flex = ratio + ' 1 0%';\n\t});\n}\n\nfunction zoom() {\n\tmediumZoom(document.querySelectorAll('.kg-image'));\n\tmediumZoom(document.querySelectorAll('.kg-gallery-image img'));\n}\n\nfunction videos() {\n\tvar $postContent = $(\".c-post-content\");\n\t$postContent.fitVids();\n}\n\nfunction authors() {\n\tlet multipleAuthors = document.querySelector(\".c-post-header__link-authors\");\n\tlet authorsSection = document.querySelector(\"#post-authors\");\n\n\tif(multipleAuthors) {\n\t\tmultipleAuthors.addEventListener(\"click\", function() {\n\t\t\tzenscroll.to(authorsSection, 500);\n\t\t});\n\t}\n}\n\nfunction readingProgress(contentArea, progressBar) {\n\tconst content = document.querySelector(contentArea);\n\tconst progress = document.querySelector(progressBar);\n\n\tconst frameListening = () => {\n\t\tconst contentBox = content.getBoundingClientRect();\n\t\tconst midPoint = 0;\n\t\tconst minsRemaining = Math.round(progress.max - progress.value);\n\n\t\tif (contentBox.top > midPoint) {\n\t\t\tprogress.style.width = \"0%\";\n\t\t}\n\n\t\tif (contentBox.top < midPoint) {\n\t\t\tprogress.style.width = \"100%\";\n\t\t}\n\n\t\tif (contentBox.top <= midPoint && contentBox.bottom >= midPoint) {\n\t\t\tprogress.style.width =\n\t\t\t\t((100 * Math.abs(contentBox.top - midPoint)) /\n\t\t\t\t\tcontentBox.height) + \"%\";\n\t\t}\n\n\t\twindow.requestAnimationFrame(frameListening);\n\t};\n\n\twindow.requestAnimationFrame(frameListening);\n};\n\nfunction disqus() {\n\tlet commentsSection = document.querySelector(\".c-post-section--comments\");\n\tlet commentsButton = document.querySelector(\".c-comments__link\");\n\n\tif(commentsSection && typeof disqus_shortname !== 'undefined') {\n\t\tcommentsSection.style.display = \"block\";\n\n\t\tcommentsButton.addEventListener(\"click\", function() {\n\t\t\tcommentsButton.style.display = \"none\";\n\t\t\t(function() { // DON'T EDIT BELOW THIS LINE\n\t\t\t\tvar d = document, s = d.createElement('script');\n\t\t\t\ts.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';\n\t\t\t\ts.setAttribute('data-timestamp', +new Date());\n\t\t\t\t(d.head || d.body).appendChild(s);\n\t\t\t})();\n\t\t});\n\n\t}\n}\n"],"file":"post.js"}