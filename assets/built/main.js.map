{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["var html = document.documentElement;\n\n$(document).ready(function() {\n\tregisterEvents();\n\tcurrentTag();\n\tsearch();\n});\n\nfunction currentTag() {\n\tlet path = window.location.pathname;\n\n\tif(path === \"/\" || path.includes(\"page/\") && !path.includes(\"tag/\")) {\n\t\t$(\".c-tags-list__item-link\").get(0).classList.add(\"c-tags-list__item-link--current\");\n\t} else {\n\t\tif(path.includes(\"tag/\")) {\n\t\t\tlet tagPath = path.replace(/page.*/g, \"\");\n\t\t\t$(\".c-tags-list__item-link[href='\"+ tagPath +\"']\").get(0).classList.add(\"c-tags-list__item-link--current\");\n\t\t}\n\t}\n}\n\nfunction registerEvents() {\n\tlet html = document.documentElement;\n\n\tlet searchButtonEl = document.getElementById(\"js-search\");\n\tlet searchModalEl = document.getElementById(\"js-search-modal\");\n\tlet searchWrapperEl = document.getElementById(\"js-search-modal__wrapper\");\n\tlet searchInputEl = document.getElementById(\"js-search-input\");\n\n\tlet menuButtonEl = document.getElementById(\"js-menu\");\n\n\tsearchButtonEl.addEventListener(\"click\", function() {\n\n\t\thtml.classList.remove(\"menu-opened\");\n\t\thtml.classList.add(\"search-opened\");\n\n\t\tsetTimeout(function() {\n\t\t\tsearchInputEl.focus();\n\t\t}, 500);\n\t});\n\n\tsearchModalEl.addEventListener(\"click\", function() {\n\t\thtml.classList.remove(\"search-opened\");\n\t\tsearchInputEl.blur();\n\t});\n\n\tsearchWrapperEl.addEventListener(\"click\", function(e) {\n\t\te.stopPropagation();\n\t});\n\n\tmenuButtonEl.addEventListener(\"click\", function() {\n\t\tlet menuOpened = html.classList.contains(\"menu-opened\");\n\n\t\tif(menuOpened) {\n\t\t\thtml.classList.remove(\"menu-opened\");\n\t\t} else {\n\t\t\thtml.classList.add(\"menu-opened\");\n\t\t}\n\t});\n\n\thotkeys.filter = function(event){\n\t\treturn true;\n\t}\n\n\thotkeys('esc', function(event, handler){\n\t\tevent.preventDefault()\n\n\t\thtml.classList.remove(\"menu-opened\");\n\t});\n}\n\nfunction search() {\n\tif (typeof ghostsearch_key !== 'undefined' && typeof ghostsearch_url !== 'undefined') {\n\n\t\tlet searchButtonEl = document.getElementById(\"js-search-button\");\n\t\tlet searchInputEl = document.getElementById(\"js-search-input\");\n\t\tlet searchEmptyEl = document.getElementById(\"js-search-empty\");\n\t\tlet searchResultsEl = document.getElementById('js-results-container');\n\n\t\tsearchButtonEl.style.display = \"block\";\n\n\t\tghostSearch = new GhostSearch({\n\t\t\tinput: '#js-search-input',\n\t\t\ttrigger: 'focus',\n\t\t\tresults: '#js-results-container',\n\t\t\tkey: ghostsearch_key,\n\t\t\turl: ghostsearch_url,\n\t\t\ttemplate: function(result) {\n\t\t\t\tlet url = [location.protocol, '//', location.host].join('');\n\t\t\t\treturn '<a href=\"' + url + '/' + result.slug + '/\"' + ' class=\"c-search__item\"><span class=\"c-search__item-name\">' + result.title + '</span></a>';\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tbeforeDisplay: function(results) {\n\t\t\t\t},\n\t\t\t\tafterDisplay: function(results){\n\t\t\t\t\tlet inputEl = document.getElementById('js-search-input');\n\n\t\t\t\t\tif(!(inputEl.value == \"\")) {\n\t\t\t\t\t\tsearchEmptyEl.style.display = \"none\";\n\n\t\t\t\t\t\tif(searchResultsEl.childNodes.length) {\n\t\t\t\t\t\t\tsearchResultsEl.firstElementChild.classList.add(\"c-search__item--selected\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsearchEmptyEl.style.display = \"block\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (results.total == 0 && inputEl.value != '') {\n\t\t\t\t\t\tlet e = document.createElement('div');\n\n\t\t\t\t\t\te.classList.add(\"c-search__no-items\");\n\t\t\t\t\t\te.innerHTML = document.querySelector(\"#js-no-results\").innerHTML;\n\n\t\t\t\t\t\tsearchResultsEl.appendChild(e);\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tbeforeFetch: function() {\n\t\t\t\t},\n\t\t\t\tafterFetch: function() {\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\thotkeys('esc', function(event, handler){\n\t\t\tevent.preventDefault()\n\n\t\t\thtml.classList.remove(\"search-opened\");\n\t\t});\n\n\t\thotkeys('alt+s', function(event, handler){\n\t\t\tevent.preventDefault()\n\n\t\t\tlet searchOpened = html.classList.contains(\"search-opened\");\n\n\t\t\tif(searchOpened) {\n\t\t\t\thtml.classList.remove(\"search-opened\");\n\t\t\t\tsearchInputEl.blur();\n\t\t\t} else {\n\t\t\t\thtml.classList.add(\"search-opened\");\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\tsearchInputEl.focus();\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t});\n\n\t\thotkeys('backspace', function(event, handler){\n\t\t\tsearchInputEl.focus();\n\t\t});\n\n\t\thotkeys('enter', function(event, handler){\n\t\t\tlet searchOpened = html.classList.contains(\"search-opened\");\n\t\t\tlet selected = document.querySelector(\".c-search__item--selected\");\n\n\t\t\tif(searchOpened && selected) {\n\t\t\t\tselected.click();\n\t\t\t}\n\t\t});\n\n\t\tlet elScroller = zenscroll.createScroller(searchResultsEl);\n\n\t\thotkeys('up,down', function(event, handler){\n\t\t\tlet searchOpened = html.classList.contains(\"search-opened\");\n\t\t\tlet results = searchResultsEl.childNodes.length > 0 && !searchResultsEl.getElementsByClassName(\"c-search__no-items\").length;\n\n\t\t\tif(searchOpened && results) {\n\t\t\t\tevent.preventDefault()\n\n\t\t\t\tsearchInputEl.blur();\n\n\t\t\t\tlet selected = document.querySelector(\".c-search__item--selected\");\n\n\t\t\t\tif(!selected) {\n\t\t\t\t\tselected = searchResultsEl.firstElementChild\n\t\t\t\t}\n\n\t\t\t\tswitch (handler.key) {\n\t\t\t\t\tcase 'up':\n\t\t\t\t\t\tlet prev = selected.previousElementSibling || searchResultsEl.lastElementChild;\n\t\t\t\t\t\tselected.classList.remove(\"c-search__item--selected\");\n\t\t\t\t\t\tprev.classList.add(\"c-search__item--selected\");\n\t\t\t\t\t\telScroller.center(prev);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'down':\n\t\t\t\t\t\tlet next = selected.nextElementSibling || searchResultsEl.firstElementChild;\n\t\t\t\t\t\tselected.classList.remove(\"c-search__item--selected\");\n\t\t\t\t\t\tnext.classList.add(\"c-search__item--selected\");\n\t\t\t\t\t\telScroller.center(next);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\twindow.addEventListener(\"beforeunload\", function() {\n\t\t\tsearchInputEl.value = \"\";\n\t\t});\n\t}\n}\n"],"file":"main.js"}